# Project Summary
El proyecto **Tutoría Matemática IA** es una aplicación móvil educativa que utiliza inteligencia artificial para optimizar la tutoría en matemáticas. Su objetivo es facilitar el aprendizaje mediante una interfaz intuitiva y accesible, dirigida a estudiantes y padres. La aplicación proporciona herramientas que mejoran la comprensión y el rendimiento en matemáticas, incluyendo un **Historial Reciente** que permite a los alumnos identificar visualmente sus sesiones de aprendizaje. La pantalla principal **Misión** permite a los alumnos comenzar a estudiar con un solo toque, simplificando su experiencia de aprendizaje. Además, los alumnos pueden subir fotos o PDFs de sus tareas para análisis a través de la funcionalidad de **Subir tarea**. Recientemente se ha implementado el **Bloque D**, que introduce un backend seguro que llama a OpenAI para proporcionar feedback guiado a los estudiantes sin dar respuestas directas, mejorando así la interacción en la **C4 Sesión Activa**. Se han realizado mejoras en el backend, incluyendo CORS configurable y un health check enriquecido. El backend ha sido preparado para el despliegue en Render, asegurando su conexión con el frontend.

# Project Module Description
El proyecto incluye los siguientes módulos funcionales:
- **Estructura de Aplicación**: Archivos en `src/screens` que representan las diferentes pantallas de la aplicación.
- **Navegación**: `src/navigation/AppNavigator.tsx` para manejar la navegación entre las pantallas, incluyendo un flujo de autenticación y la nueva pantalla de sesión activa.
- **Estado Global**: `src/context/AppContext.tsx` para gestionar el estado de sesión y los roles de usuario.
- **Componentes Reutilizables**: `src/components/BaseLayout.tsx` como contenedor estándar para las pantallas.
- **Chat del Tutor IA**: `src/screens/TutorScreen.tsx`, que permite la interacción simulada con un tutor, mejorada con gestión de mensajes y retroalimentación pedagógica inmediata.
- **Progreso del Alumno**: `src/screens/ProgresoScreen.tsx`, que muestra el avance del alumno con estadísticas dinámicas y un historial de sesiones de aprendizaje.
- **Misión**: `src/screens/MisionScreen.tsx`, que permite a los alumnos comenzar a estudiar con un solo toque y proporciona una interfaz para visualizar su progreso en la misión del día, ahora con un botón para navegar a la pantalla de **Subir tarea** y a la nueva pantalla de **C4 Sesión Activa**.
- **C4 Sesión Activa**: `src/screens/C4_SesionActivaScreen.tsx`, que permite la resolución de ejercicios matemáticos con validación y retroalimentación a través de un backend seguro.
- **Subir Tarea**: `src/screens/SubirTareaScreen.tsx`, que permite a los alumnos subir fotos o PDFs de sus tareas para análisis.
- **Autenticación**: Mejoras en las pantallas de **Inicio de Sesión** y **Registro** con funcionalidad de visibilidad de contraseñas.
- **Perfil del Usuario**: `src/screens/PerfilScreen.tsx`, que permite gestionar la información del perfil del usuario y contiene una herramienta de reinicio de datos para pruebas.

# Directory Tree
```
/data/template-dist/tutoria_matematica
├── .gitignore                # Especifica archivos y directorios a ignorar por Git
├── README.md                 # Documentación sobre el proyecto y su uso
├── DEPLOY.md                 # Guía para el despliegue en Render
├── PRODUCTION-CHECKLIST.md   # Checklist para la verificación post-despliegue
├── App.tsx                   # Punto de entrada principal de la aplicación
├── index.html                # Archivo HTML principal para la aplicación
├── package.json              # Dependencias de Node.js y scripts
├── pnpm-lock.yaml            # Archivo de bloqueo para la gestión de dependencias
├── script.tsx                # Archivo principal para la renderización de React
├── src
│   ├── componentes            # Componentes reutilizables
│   │   ├── BaseLayout.tsx    # Componente base para las pantallas
│   │   ├── MensajeChat.tsx   # Componente para burbujas de chat, ahora con soporte mejorado
│   │   └── TarjetaProgreso.tsx # Componente para mostrar progreso
│   ├── contexto               # Contexto para la gestión del estado
│   │   └── AppContext.tsx    # Proveedor de contexto de aplicación
│   ├── navegación            # Navegación de la aplicación
│   │   └── AppNavigator.tsx   # Manejo de rutas y autenticación
│   ├── pantallas               # Pantallas de la aplicación
│   │   ├── HomeScreen.tsx     # Pantalla principal
│   │   ├── LoginScreen.tsx    # Pantalla de inicio de sesión
│   │   ├── RegisterScreen.tsx  # Pantalla de registro
│   │   ├── ProgresoScreen.tsx  # Pantalla de progreso, ahora con mejoras en el historial de sesiones
│   │   ├── PerfilScreen.tsx    # Pantalla para gestionar el perfil, incluye herramienta de reinicio
│   │   ├── TutorScreen.tsx     # Pantalla mejorada para interacción con el tutor de IA
│   │   ├── MisionScreen.tsx     # Nueva pantalla principal del alumno
│   │   ├── C4_SesionActivaScreen.tsx # Nueva pantalla para el motor de sesión activa
│   │   └── SubirTareaScreen.tsx # Nueva pantalla para subir tareas
│   ├── servicios              # Servicios y repositorios
│   │   └── RepositorioMemoriaAlumno.ts # Gestión de memoria del alumno, errores y resúmenes de sesiones
│   ├── tipos                 # Tipos y modelos de datos
│       ├── auth.ts           # Definición de tipos y modelos de usuario
│       ├── chat.ts           # Definiciones para el sistema de mensajería del Tutor IA
│       ├── perfilAlumno.ts    # Modelo de datos para el perfil del alumno
│       ├── progresoAlumno.ts   # Modelo de datos para el progreso del alumno
│       ├── errorFrecuente.ts   # Modelo de datos para errores frecuentes
│       ├── resumenSesion.ts    # Modelo de datos para el resumen de sesión
│       └── sesionAprendizaje.ts # Modelo de datos para gestionar el flujo pedagógico y el estado de una sesión
└── todo.md                   # Tareas y planificación del proyecto
```

# File Description Inventory
- **App.tsx**: Componente principal que orquesta la aplicación y gestiona el contexto global.
- **index.html**: Archivo HTML que sirve como contenedor para la aplicación React.
- **script.tsx**: Archivo que renderiza la aplicación React en el DOM.
- **src/componentes/BaseLayout.tsx**: Componente que proporciona una estructura estándar para las pantallas.
- **src/componentes/MensajeChat.tsx**: Componente visual para las burbujas de chat, ahora con soporte mejorado.
- **src/componentes/TarjetaProgreso.tsx**: Componente simple para mostrar el progreso de una materia.
- **src/context/AppContext.tsx**: Maneja el estado global de la aplicación y la sesión del usuario.
- **src/navegación/AppNavigator.tsx**: Controla la navegación entre las diferentes pantallas de la aplicación y el flujo de autenticación, ahora con integración del motor de sesión activa.
- **src/pantallas/HomeScreen.tsx**: Pantalla de inicio con bienvenida al usuario.
- **src/pantallas/LoginScreen.tsx**: Pantalla para inicio de sesión con funcionalidad de visibilidad de contraseñas.
- **src/pantallas/RegisterScreen.tsx**: Pantalla para registro de nuevos usuarios con funcionalidad de visibilidad de contraseñas.
- **src/pantallas/ProgresoScreen.tsx**: Pantalla que muestra el progreso del usuario en matemáticas, errores frecuentes y un historial de sesiones con mejoras en la interfaz.
- **src/pantallas/PerfilScreen.tsx**: Pantalla para gestionar la información del perfil del usuario, incluye herramienta de reinicio de datos.
- **src/pantallas/TutorScreen.tsx**: Pantalla mejorada para interacción con el tutor de IA.
- **src/pantallas/MisionScreen.tsx**: Nueva pantalla principal para alumnos que permite iniciar la misión del día y navegar a la pantalla de subida de tarea y al motor de sesión activa.
- **src/pantallas/C4_SesionActivaScreen.tsx**: Nueva pantalla para el motor de sesión activa que permite resolver ejercicios interactivos.
- **src/pantallas/SubirTareaScreen.tsx**: Nueva pantalla que permite a los alumnos subir fotos o PDFs de sus tareas.
- **src/servicios/RepositorioMemoriaAlumno.ts**: Clase encargada de gestionar la persistencia de datos del alumno, errores y resúmenes de sesiones, ahora con lógica mejorada.
- **src/tipos/auth.ts**: Define los tipos y modelos de datos relacionados con el usuario y la sesión.
- **src/tipos/chat.ts**: Define los tipos y modelos de datos para el sistema de mensajería del Tutor IA.
- **src/tipos/perfilAlumno.ts**: Define la estructura del perfil del alumno.
- **src/tipos/progresoAlumno.ts**: Define la estructura del progreso del alumno.
- **src/tipos/errorFrecuente.ts**: Define la estructura para registrar errores frecuentes.
- **src/tipos/resumenSesion.ts**: Define la estructura para almacenar resúmenes de sesiones.
- **src/tipos/sesionAprendizaje.ts**: Define la estructura de datos para gestionar el flujo pedagógico y el estado de una sesión.
- **src/utils/tutorApi.ts**: Utilidad para interactuar con el backend del Tutor IA.
- **DEPLOY.md**: Guía para el despliegue en Render.
- **PRODUCTION-CHECKLIST.md**: Checklist para la verificación post-despliegue.
- **todo.md**: Documentación de tareas y planificación del desarrollo.

# Technology Stack
- **React**: Para la construcción de la interfaz de usuario.
- **TypeScript**: Para tipado fuerte y mayor consistencia en el desarrollo.
- **Vite**: Herramienta de construcción moderna para un desarrollo rápido.
- **PNPM**: Gestor de paquetes para la gestión de dependencias.
- **Node.js**: Para el backend seguro que interactúa con OpenAI.
- **Express**: Framework para construir el servidor del backend.
- **OpenAI API**: Para proporcionar feedback pedagógico guiado a los estudiantes.

# Usage
1. **Instalación**:
   Ejecuta el siguiente comando para instalar las dependencias:
   ```
   pnpm install
   ```

2. **Desarrollo**:
   Inicia el entorno de desarrollo:
   ```
   pnpm run dev
   ```

3. **Construcción del Proyecto**:
   Para construir el proyecto para producción, utiliza:
   ```
   pnpm run build
   ```

4. **Configuración del Backend**:
   - Navega al directorio del servidor y copia el archivo de ejemplo de variables de entorno:
   ```
   cd server
   cp .env.example .env
   ```
   - Edita `.env` y añade tu `OPENAI_API_KEY`.

5. **Ejecutar el Servidor**:
   - Para desarrollo:
   ```
   npm run dev
   ```
   - Para producción:
   ```
   npm start
   ```

Los archivos generados se ubicarán en el directorio `dist`. Asegúrate de actualizar `index.html` y `script.tsx` con tu código de aplicación al construir.
